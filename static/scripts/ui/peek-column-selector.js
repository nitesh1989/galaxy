define("ui/peek-column-selector",["jquery"],function(e){"use strict";function t(e){if(e.disabled&&"array"!==c.default.type(e.disabled))throw new Error('"disabled" must be defined as an array of indeces: '+JSON.stringify(e));if(e.multiselect&&e.selected&&"array"!==c.default.type(e.selected))throw new Error('Mulitselect rows need an array for "selected": '+JSON.stringify(e));if(!e.label||!e.id)throw new Error("Peek controls need a label and id for each control row: "+JSON.stringify(e));if(e.disabled&&-1!==e.disabled.indexOf(e.selected))throw new Error("Selected column is in the list of disabled columns: "+JSON.stringify(e));return e}function n(e,t){return u("<div/>").addClass(g).text(e.label)}function a(e,t){var a=u("<td/>").html(n(e,t)).attr("data-"+y,t);return e.disabled&&-1!==e.disabled.indexOf(t)&&a.addClass(x),a}function r(e,t,n){var a=e.children("."+g);e.hasClass(b)?a.html(void 0!==t.selectedText?t.selectedText:t.label):a.html(void 0!==t.unselectedText?t.unselectedText:t.label)}function l(e,t){var n=a(e,t);return e.selected===t&&n.addClass(b),r(n,e,t),n.hasClass(x)||n.click(function(n){var a=u(this);if(!a.hasClass(b)){a.parent().children("."+b).removeClass(b).each(function(){r(u(this),e,t)}),a.addClass(b),r(a,e,t);var l={},d=a.parent().attr("id"),s=a.data(y);l[d]=s,a.parents(".peek").trigger(p,l)}}),n}function d(e,t){var n=a(e,t);return e.selected&&-1!==e.selected.indexOf(t)&&n.addClass(b),r(n,e,t),n.hasClass(x)||n.click(function(n){var a=u(this);a.toggleClass(b),r(a,e,t);var l=a.parent().find("."+b).map(function(e,t){return u(t).data(y)}),d={},s=a.parent().attr("id"),i=c.default.makeArray(l);d[s]=i,a.parents(".peek").trigger(p,d)}),n}function s(e,t){for(var n=[],a=0;a<e;a+=1)n.push(t.multiselect?d(t,a):l(t,a));return n}function i(e,t,n){var a=u("<tr/>").attr("id",t.id).addClass(C);if(n){var r=u("<td/>").addClass(v).text(t.label+":");a.append(r)}return a.append(s(e,t)),a}function o(e){e=c.default.extend(!0,{},f,e);var n=u(this).addClass(m).find("table"),a=n.find("th").length,r=n.find("tr").length,l=n.find("td[colspan]").map(function(t,n){var a=u(this);return a.text()&&a.text().match(new RegExp("^"+e.commentChar))?u(this).css("color","grey").parent().get(0):null});if(e.hideCommentRows&&(l.hide(),r-=l.length),e.includePrompts){var d=u("<th/>").addClass("top-left").text(e.topLeftContent).attr("rowspan",r);n.find("tr").first().prepend(d)}var s=n.find("th:not(.top-left)").each(function(t,n){var a=u(this),r=a.text().replace(/^\d+\.*/,""),l=e.columnNames[t]||r;a.attr("data-"+k,l).text(t+1+(l?"."+l:""))});return e.renameColumns&&s.addClass(w).click(function(){var t=u(this),n=t.index()+(e.includePrompts?0:1),a=t.data(k),r=prompt("New column name:",a);if(null!==r&&r!==a){t.text(n+(r?"."+r:"")).data(k,r).attr("data-",k,r);var l=c.default.makeArray(t.parent().children("th:not(.top-left)").map(function(){return u(this).data(k)}));t.parents(".peek").trigger(h,l)}}),e.controls.forEach(function(r,l){t(r);var d=i(a,r,e.includePrompts);n.find("tbody").append(d)}),this}var c=function(e){return e&&e.__esModule?e:{default:e}}(e),u=c.default,f={renameColumns:!1,columnNames:[],commentChar:"#",hideCommentRows:!1,includePrompts:!0,topLeftContent:"Columns:"},m="peek-column-selector",p="peek-column-selector.change",h="peek-column-selector.rename",C="control",v="control-prompt",b="selected",x="disabled",g="button",w="renamable-header",y="column-index",k="column-name";c.default.fn.extend({peekColumnSelector:function(e){return this.map(function(){return o.call(this,e)})}})});
//# sourceMappingURL=../../maps/ui/peek-column-selector.js.map
