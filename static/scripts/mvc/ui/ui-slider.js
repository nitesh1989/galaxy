define("mvc/ui/ui-slider",["exports","utils/utils"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(t),s=Backbone.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new Backbone.Model({id:i.default.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element");var s=[];this.$text.on("change",function(){t.value($(this).val())}).on("keyup",function(e){s[e.which]=!1}).on("keydown",function(e){var i=e.which;s[i]=!0,t.model.get("is_workflow")&&s[16]&&52==i?(t.value("$"),event.preventDefault()):8==i||9==i||13==i||37==i||39==i||i>=48&&i<=57&&!s[16]||i>=96&&i<=105||(190==i||110==i)&&-1==$(this).val().indexOf(".")&&t.model.get("precise")||(189==i||109==i)&&-1==$(this).val().indexOf("-")||t._isParameter($(this).val())||s[91]||s[17]||event.preventDefault()});var l=this.model.attributes;this.has_slider=null!==l.max&&null!==l.min&&l.max>l.min;var n=l.step;n||(n=l.precise&&this.has_slider?(l.max-l.min)/l.split:1),this.has_slider?(this.$text.addClass("ui-form-slider-left"),this.$slider.slider({min:l.min,max:l.max,step:n}).on("slide",function(e,i){t.value(i.value)})):this.$slider.hide(),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.get("value");this.has_slider&&this.$slider.slider("value",e),e!==this.$text.val()&&this.$text.val(e)},value:function(e){var t=this.model.attributes;return void 0!==e&&(null===e||""===e||this._isParameter(e)||(isNaN(e)&&(e=0),!t.precise&&(e=Math.round(e)),null!==t.max&&(e=Math.min(e,t.max)),null!==t.min&&(e=Math.max(e,t.min))),this.model.set("value",e),this.model.trigger("change"),t.onchange(e)),this.model.get("value")},_isParameter:function(e){return this.model.get("is_workflow")&&"$"===String(e).substring(0,1)},_template:function(){return'<div class="ui-form-slider"><input class="ui-form-slider-text" type="text"/><div class="ui-form-slider-element"/></div>'}});e.default={View:s}});
//# sourceMappingURL=../../../maps/mvc/ui/ui-slider.js.map
