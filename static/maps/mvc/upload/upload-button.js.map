{"version":3,"sources":["mvc/upload/upload-button.js"],"names":["View","Backbone","extend","initialize","options","self","this","model","Model","percentage","icon","tooltip","label","status","_template","onunload","$","onclick","render","window","setElement","get","attributes","$el","off","on","e","title","placement","addClass","$progress","css","width"],"mappings":"wHAEA,IAAIA,EAAOC,SAASD,KAAKE,QACrBC,WAAY,SAASC,GACjB,IAAIC,EAAOC,KACXA,KAAKC,MALbH,GAAAA,EAAAG,OAOY,IAAIN,SAASO,OALdP,KAAAA,YACPE,QAAY,8CACJE,MAAO,YACXI,WACKL,EAEGM,OAAM,GACNC,SAAS,aACTC,QAAO,eACPH,IAAAA,GACAI,KAAAA,WAAQP,KALOQ,aAMfC,KAAAA,UAAAA,KAAUC,EAAA,iBACVC,KAAAA,SAAAA,KAASV,MAAA,SAAWD,KAAEY,OAAAZ,MAPPA,KAAnBY,SASJF,EAAAG,QAAKC,GAAAA,eAAgBN,WAAAA,OAALT,EAAhBE,MAAAc,IAAA,WAAgBhB,MAGhBa,OAAA,WACAF,IAA6BZ,EAAAE,KAAMD,MAAAiB,WAANhB,KAA7BiB,IAlBwBC,IAAA,SA0BnBC,GAAG,QAAS,SAAAC,GALbtB,EAAAa,QAAAS,KAEJf,SACAgB,MACKH,KAAIjB,MACJkB,IAAG,WACArB,UAAQa,WAGRU,KAAAA,UACAC,cAPRC,SAAA,gBASAA,SAAKC,6BAjCmBD,SAAA,IAAAzB,EAAAS,QAAA,gBAAAT,EAAAS,QAsCnBkB,KAAMC,MAAU5B,EAAQK,WAAlB,OAedK,UAAA,WArDL,MA4CY,gOAWKd,KAAMA","file":"../../../scripts/mvc/upload/upload-button.js","sourcesContent":["/** View for upload/progress bar button */\n\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                icon: \"fa-upload\",\n                tooltip: \"Download from URL or upload files from disk\",\n                label: \"Load Data\",\n                percentage: 0,\n                status: \"\",\n                onunload: function() {},\n                onclick: function() {}\n            }).set(options);\n        this.setElement(this._template());\n        this.$progress = this.$(\".progress-bar\");\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n        $(window).on(\"beforeunload\", () => self.model.get(\"onunload\")());\n    },\n\n    render: function() {\n        var self = this;\n        var options = this.model.attributes;\n        this.$el\n            .off(\"click\")\n            .on(\"click\", e => {\n                options.onclick(e);\n            })\n            .tooltip({\n                title: this.model.get(\"tooltip\"),\n                placement: \"bottom\"\n            });\n        this.$progress\n            .removeClass()\n            .addClass(\"progress-bar\")\n            .addClass(\"progress-bar-notransition\")\n            .addClass(options.status != \"\" && `progress-bar-${options.status}`)\n            .css({ width: `${options.percentage}%` });\n    },\n\n    /** Template */\n    _template: function() {\n        return (\n            '<div class=\"upload-button\">' +\n            '<div class=\"progress\">' +\n            '<div class=\"progress-bar\"/>' +\n            '<a class=\"panel-header-button\" href=\"javascript:void(0)\" id=\"tool-panel-upload-button\">' +\n            '<span class=\"fa fa-upload\"/>' +\n            \"</a>\" +\n            \"</div>\" +\n            \"</div>\"\n        );\n    }\n});\nexport default { View: View };\n"]}