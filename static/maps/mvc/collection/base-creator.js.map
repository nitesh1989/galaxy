{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["CollectionCreatorMixin","_validationWarning","what","clear","this","$","add","focus","removeClass","addClass","VALIDATION_CLASS","hideOriginals","prop","_changeName","ev","_getName","_nameCheckForEnter","keyCode","blocking","_clickCreate","_","escape","val","_clickMoreHelp","stopPropagation","hide","_clickLessHelp","show","_toggleHelp","toggleClass","toggle","_showAlert","message","alertClass","find","html","_hideAlert","_cancelCreate","oncancel","call","name","createList","_setUpCommonSettings","attributes","defaultHideSourceItems","_renderFooter","self","speed","callback","$footer","footerSettings","templates","footer","_creatorTemplates","each","property","selector","main","template","join"],"mappings":"2HAGA,IAAIA,GAEAC,mBAAoB,SAASC,EAAMC,GAElB,SAATD,IACAA,EAAOE,KAAKC,EAAE,oBAAoBC,IAAIF,KAAKC,EAAE,4BALrDL,KAAAA,EAAAA,oBACAO,QACAN,UAEIE,GACID,EAAAA,GAAOE,KAAOC,EAAP,wBACPG,YATZ,sBAaQN,EAAIC,SAbZ,uBAiBYD,qBAAKO,SAASC,GACjBN,KAAAO,cAAAP,KAAAC,EAAA,mBAAAO,KAAA,YAKJC,YApBwB,SAAAC,GAyBrBV,KAAKH,mBAAmB,SAAUG,KAAKW,aAAvCC,mBAAKf,SAAAA,GAzBgB,KAAAa,EAAAG,SAAAb,KAAAc,UA+BjBd,KAAKe,gBACRJ,SAAA,WACJ,OAjCwBK,EAAAC,OAAAjB,KAAAC,EAAA,oBAAAiB,QAsCxBC,eAtCwB,SAAAT,GA2CrBA,EAAGU,kBAHPpB,KAAAC,EAAA,cAAAI,SAAA,YACAL,KAAAC,EAAA,cAAAoB,QAGIC,eAAO,SAAAZ,GACPA,EAAAU,kBACHpB,KA9CwBC,EAAA,cAAAG,YAAA,YA+CzBJ,KAAAC,EAAA,cAAAsB,QAGIC,YAAKvB,SAAES,GACPA,EAAAU,kBACHpB,KApDwBC,EAAA,cAAAwB,YAAA,YAqDzBzB,KAAAC,EAAA,cAAAyB,UAIIC,WAAA,SAAOC,EAAcF,GACxBG,EA1DwBA,GAAA,eA+DrB7B,KAAKC,EAAE,cAAcoB,OAHzBrB,KAAAC,EAAA,kBACA0B,KAAAA,QAAY,2BACRE,SAAAA,GACAN,OACAO,KAAA,kBAhEqBC,KAAAH,IAyErBI,WAAA,SAAOJ,GACP5B,KAAAC,EAAA,cAAOsB,OACVvB,KA3EwBC,EAAA,kBAAAoB,QA8ErBY,cAAI,SAAYC,GACO,mBAAnBlC,KAAKkC,UACRlC,KAAAkC,SAAAC,KAAAnC,OAKDe,aAAIqB,SAAO1B,GACX,IAAA0B,EAAKA,KAAMzB,WACPyB,EAEApC,KAAKqC,UACRrC,KAAAqC,WAAAD,GAFApC,KAFDH,mBAEiBiB,SAMjBwB,qBAAK/B,SAAgBgC,GACxBvC,KA/FwBO,cAAAgC,EAAAC,yBAAA,GAmGrBC,cAAIC,SAAJC,EAAAC,GACA,IAAAF,EAAIG,KAGJ7B,EAAOhB,KAAK8C,EAAAA,WACRJ,QADJX,KAAA/B,KAAA+C,UAAAC,UASJC,OANIjC,EAAAkC,KAAAlD,KAAI8C,eAAA,SAAAK,EAAyBC,GACzBV,EAAAzC,EAAAmD,GAAO5C,KAAA,UAAsBe,EAA7B4B,MAEJ,mBAAON,KAAAA,UA7Gc7C,KAAAC,EAAA,sBAAAsB,OAgHzB0B,GAhHyBA,mBAiHrBI,KAAMrC,EAAEsC,UAEA,8CAUZ1D,yDARY,+CACF2D,KAAK,kBAOf3D,uBAAwBA","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["/* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\nvar CollectionCreatorMixin = {\n    /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n    _validationWarning: function(what, clear) {\n        var VALIDATION_CLASS = \"validation-warning\";\n        if (what === \"name\") {\n            what = this.$(\".collection-name\").add(this.$(\".collection-name-prompt\"));\n            this.$(\".collection-name\")\n                .focus()\n                .select();\n        }\n        if (clear) {\n            what = what || this.$(`.${VALIDATION_CLASS}`);\n            what.removeClass(VALIDATION_CLASS);\n        } else {\n            what.addClass(VALIDATION_CLASS);\n        }\n    },\n\n    _changeHideOriginals: function(ev) {\n        this.hideOriginals = this.$(\".hide-originals\").prop(\"checked\");\n    },\n\n    // ........................................................................ footer\n    /** handle a collection name change */\n    _changeName: function(ev) {\n        this._validationWarning(\"name\", !!this._getName());\n    },\n\n    /** check for enter key press when in the collection name and submit */\n    _nameCheckForEnter: function(ev) {\n        if (ev.keyCode === 13 && !this.blocking) {\n            this._clickCreate();\n        }\n    },\n\n    /** get the current collection name */\n    _getName: function() {\n        return _.escape(this.$(\".collection-name\").val());\n    },\n\n    // ........................................................................ header\n    /** expand help */\n    _clickMoreHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").addClass(\"expanded\");\n        this.$(\".more-help\").hide();\n    },\n    /** collapse help */\n    _clickLessHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").removeClass(\"expanded\");\n        this.$(\".more-help\").show();\n    },\n    /** toggle help */\n    _toggleHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").toggleClass(\"expanded\");\n        this.$(\".more-help\").toggle();\n    },\n\n    /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n    _showAlert: function(message, alertClass) {\n        alertClass = alertClass || \"alert-danger\";\n        this.$(\".main-help\").hide();\n        this.$(\".header .alert\")\n            .attr(\"class\", \"alert alert-dismissable\")\n            .addClass(alertClass)\n            .show()\n            .find(\".alert-message\")\n            .html(message);\n    },\n    /** hide the alerts at the top */\n    _hideAlert: function(message) {\n        this.$(\".main-help\").show();\n        this.$(\".header .alert\").hide();\n    },\n\n    _cancelCreate: function(ev) {\n        if (typeof this.oncancel === \"function\") {\n            this.oncancel.call(this);\n        }\n    },\n\n    /** attempt to create the current collection */\n    _clickCreate: function(ev) {\n        var name = this._getName();\n        if (!name) {\n            this._validationWarning(\"name\");\n        } else if (!this.blocking) {\n            this.createList(name);\n        }\n    },\n\n    _setUpCommonSettings: function(attributes) {\n        this.hideOriginals = attributes.defaultHideSourceItems || false;\n    },\n\n    /** render the footer, completion controls, and cancel controls */\n    _renderFooter: function(speed, callback) {\n        var self = this;\n        var $footer = this.$(\".footer\")\n            .empty()\n            .html(this.templates.footer());\n        _.each(this.footerSettings, (property, selector) => {\n            self.$(selector).prop(\"checked\", self[property]);\n        });\n        if (typeof this.oncancel === \"function\") {\n            this.$(\".cancel-create.btn\").show();\n        }\n        return $footer;\n    },\n\n    _creatorTemplates: {\n        main: _.template(\n            [\n                '<div class=\"header flex-row no-flex\"></div>',\n                '<div class=\"middle flex-row flex-row-container\"></div>',\n                '<div class=\"footer flex-row no-flex\"></div>'\n            ].join(\"\")\n        )\n    }\n};\n\n//==============================================================================\nexport default {\n    CollectionCreatorMixin: CollectionCreatorMixin\n};\n"]}