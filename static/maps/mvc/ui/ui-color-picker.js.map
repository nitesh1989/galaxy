{"version":3,"sources":["mvc/ui/ui-color-picker.js"],"names":["Backbone","View","extend","colors","standard","base","theme","initialize","_utils2","default","merge","options","this","_template","$","$value","$header","visible","value","setElement","$boxes","$panel","self","$view","css","_build","trigger","fadeIn","new_val","fadeOut","empty","_getValue","html","_templateCheck","onchange","rgb","match","hex","x","parseInt","toString","slice","_content","i","line_def","length","$content","$line","find","$box","_templateBox","top","append","_templateContent","color"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-color-picker.js","sourcesContent":["/** Renders the color picker used e.g. in the tool form **/\nimport Utils from \"utils/utils\";\nexport default Backbone.View.extend({\n    colors: {\n        standard: [\"c00000\", \"ff0000\", \"ffc000\", \"ffff00\", \"92d050\", \"00b050\", \"00b0f0\", \"0070c0\", \"002060\", \"7030a0\"],\n        base: [\"ffffff\", \"000000\", \"eeece1\", \"1f497d\", \"4f81bd\", \"c0504d\", \"9bbb59\", \"8064a2\", \"4bacc6\", \"f79646\"],\n        theme: [\n            [\"f2f2f2\", \"7f7f7f\", \"ddd9c3\", \"c6d9f0\", \"dbe5f1\", \"f2dcdb\", \"ebf1dd\", \"e5e0ec\", \"dbeef3\", \"fdeada\"],\n            [\"d8d8d8\", \"595959\", \"c4bd97\", \"8db3e2\", \"b8cce4\", \"e5b9b7\", \"d7e3bc\", \"ccc1d9\", \"b7dde8\", \"fbd5b5\"],\n            [\"bfbfbf\", \"3f3f3f\", \"938953\", \"548dd4\", \"95b3d7\", \"d99694\", \"c3d69b\", \"b2a2c7\", \"92cddc\", \"fac08f\"],\n            [\"a5a5a5\", \"262626\", \"494429\", \"17365d\", \"366092\", \"953734\", \"76923c\", \"5f497a\", \"31859b\", \"e36c09\"],\n            [\"7f7f7e\", \"0c0c0c\", \"1d1b10\", \"0f243e\", \"244061\", \"632423\", \"4f6128\", \"3f3151\", \"205867\", \"974806\"]\n        ]\n    },\n\n    initialize: function(options) {\n        this.options = Utils.merge(options, {});\n        this.setElement(this._template());\n        this.$panel = this.$(\".ui-color-picker-panel\");\n        this.$view = this.$(\".ui-color-picker-view\");\n        this.$value = this.$(\".ui-color-picker-value\");\n        this.$header = this.$(\".ui-color-picker-header\");\n        this._build();\n        this.visible = false;\n        this.value(this.options.value);\n        this.$boxes = this.$(\".ui-color-picker-box\");\n        var self = this;\n        this.$boxes.on(\"click\", function() {\n            self.value($(this).css(\"background-color\"));\n            self.$header.trigger(\"click\");\n        });\n        this.$header.on(\"click\", () => {\n            self.visible = !self.visible;\n            if (self.visible) {\n                self.$view.fadeIn(\"fast\");\n            } else {\n                self.$view.fadeOut(\"fast\");\n            }\n        });\n    },\n\n    /** Get/set value */\n    value: function(new_val) {\n        if (new_val !== undefined && new_val !== null) {\n            this.$value.css(\"background-color\", new_val);\n            this.$(\".ui-color-picker-box\").empty();\n            this.$(this._getValue()).html(this._templateCheck());\n            this.options.onchange && this.options.onchange(new_val);\n        }\n        return this._getValue();\n    },\n\n    /** Get value from dom */\n    _getValue: function() {\n        var rgb = this.$value.css(\"background-color\");\n        rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n        if (rgb) {\n            function hex(x) {\n                return `0${parseInt(x).toString(16)}`.slice(-2);\n            }\n            return `#${hex(rgb[1])}${hex(rgb[2])}${hex(rgb[3])}`;\n        } else {\n            return null;\n        }\n    },\n\n    /** Build color panel */\n    _build: function() {\n        this._content({ colors: this.colors.base });\n        for (var i in this.colors.theme) {\n            var line_def = {};\n            if (i == 0) {\n                line_def[\"bottom\"] = true;\n            } else if (i != this.colors.theme.length - 1) {\n                line_def[\"top\"] = true;\n                line_def[\"bottom\"] = true;\n            } else {\n                line_def[\"top\"] = true;\n            }\n            line_def[\"colors\"] = this.colors.theme[i];\n            this._content(line_def);\n        }\n        this._content({ colors: this.colors.standard });\n    },\n\n    /** Create content */\n    _content: function(options) {\n        var colors = options.colors;\n        var $content = $(this._templateContent());\n        var $line = $content.find(\".line\");\n        this.$panel.append($content);\n        for (var i in colors) {\n            var $box = $(this._templateBox(colors[i]));\n            if (options.top) {\n                $box.css(\"border-top\", \"none\");\n                $box.css(\"border-top-left-radius\", \"0px\");\n                $box.css(\"border-top-right-radius\", \"0px\");\n            }\n            if (options.bottom) {\n                $box.css(\"border-bottom\", \"none\");\n                $box.css(\"border-bottom-left-radius\", \"0px\");\n                $box.css(\"border-bottom-right-radius\", \"0px\");\n            }\n            $line.append($box);\n        }\n        return $content;\n    },\n\n    /** Check icon */\n    _templateCheck: function() {\n        return '<div class=\"ui-color-picker-check fa fa-check\"/>';\n    },\n\n    /** Content template */\n    _templateContent: function() {\n        return '<div class=\"ui-color-picker-content\">' + '<div class=\"line\"/>' + \"</div>\";\n    },\n\n    /** Box template */\n    _templateBox: function(color) {\n        return `<div id=\"${color}\" class=\"ui-color-picker-box\" style=\"background-color: #${color};\"/>`;\n    },\n\n    /** Main template */\n    _template: function() {\n        return (\n            '<div class=\"ui-color-picker\">' +\n            '<div class=\"ui-color-picker-header\">' +\n            '<div class=\"ui-color-picker-value\"/>' +\n            '<div class=\"ui-color-picker-label\">Select a color</div>' +\n            \"</div>\" +\n            '<div class=\"ui-color-picker-view ui-input\">' +\n            '<div class=\"ui-color-picker-panel\"/>' +\n            \"</div>\"\n        );\n        (\"</div>\");\n    }\n});\n"]}