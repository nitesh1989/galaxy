{"version":3,"sources":["mvc/ui/ui-select-genomespace.js"],"names":["View","Backbone","extend","initialize","options","self","this","browse_button","_uiMisc2","default","ButtonIcon","title","icon","tooltip","onclick","browseGenomeSpace","Input","token_textbox","type","_template","append","$el","filename_textbox","$","_toolGenomespace2","openFileBrowser","successCallback","data","destination","token","value","new_value","undefined","_getValue","_setValue","values","split"],"mappings":"uQAOIA,EAAOC,SAASD,KAAKE,QAErBC,WAAY,SAASC,GAEjB,IAAIC,EAAOC,KAGXA,KAAKC,cAAgB,IAAIC,EAAAC,QAAGC,YACxBC,MAAO,SACPC,KAAM,gBACNC,QAAS,qBACTC,QAAS,WAdrBT,EAAAU,uBAKIZ,KAAAA,iBAAY,IAAAK,EAAAC,QAAAO,MAkBRV,KAAKW,cAAgB,IAAIT,EAAAC,QAAGO,OAd5BE,KAAA,aAIIL,KAAAA,WAAAA,KAASM,UAAAf,IACTU,KAAAA,EAAAA,wBAASM,OAAWd,KAAAC,cAAAc,KAChBhB,KAAAA,EAAAA,2BAAAe,OAAAd,KAAAgB,iBAAAD,KACHf,KAAAiB,EAAA,wBAAAH,OAAAd,KAAAW,cAAAI,MAILN,kBAAKO,SAAAA,GAgBL,IAAIjB,EAAOC,KAdXkB,EAAAf,QAAAgB,iBACAC,gBAAKT,SAAoBU,GACrBT,EAAAA,MAAMS,EAAAC,YAANV,IAAMS,EAAAE,WAMVV,UAAA,SAAOf,GACP,MA5BwB,6SA2CxB0B,MAAA,SACIC,GAgBJ,QAAkBC,IAAdD,EADJ,OAAAzB,KAAA2B,YAFJ3B,KAAA4B,UAAAH,IAOKE,UAAA,WACJ,OAjE2B3B,KAAAgB,iBAAAQ,QAiE3B,IAjE2BxB,KAAAW,cAAAa,SAqExBI,UAAA,SAAeZ,GArESS,IA2EpBI,OAASJ,EAAUK,MAAM,KAHjC9B,KAAAgB,iBAAAQ,MAAAK,OAAA,IACAD,KAAAA,cAAWJ,MAAAK,OAASJ,mBAMnB/B,KAAAA","file":"../../../scripts/mvc/ui/ui-select-genomespace.js","sourcesContent":["// dependencies\nimport Utils from \"utils/utils\";\nimport Ui from \"mvc/ui/ui-misc\";\nimport GenomespaceBrowser from \"mvc/tool/tool-genomespace\";\n/**\n * GenomeSpace file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize: function(options) {\n        // link this\n        var self = this;\n\n        // create insert new list element button\n        this.browse_button = new Ui.ButtonIcon({\n            title: \"Browse\",\n            icon: \"fa fa-sign-in\",\n            tooltip: \"Browse GenomeSpace\",\n            onclick: function() {\n                self.browseGenomeSpace();\n            }\n        });\n\n        // create genomespace filepath textbox\n        this.filename_textbox = new Ui.Input();\n\n        // create genomespace token textbox\n        this.token_textbox = new Ui.Input({\n            type: \"password\"\n        });\n\n        // create elements\n        this.setElement(this._template(options));\n        this.$(\".ui-gs-browse-button\").append(this.browse_button.$el);\n        this.$(\".ui-gs-filename-textbox\").append(this.filename_textbox.$el);\n        this.$(\".ui-gs-token-textbox\").append(this.token_textbox.$el);\n    },\n\n    /** Browse GenomeSpace */\n    browseGenomeSpace: function(options) {\n        var self = this;\n        GenomespaceBrowser.openFileBrowser({\n            successCallback: function(data) {\n                self.value(`${data.destination}^${data.token}`);\n            }\n        });\n    },\n\n    /** Main Template */\n    _template: function(options) {\n        return (\n            '<div class=\"ui-gs-select-file\">' +\n            '<div class=\"ui-gs-browse-field\">' +\n            '<span class=\"ui-gs-browse-button\" />' +\n            '<span class=\"ui-gs-filename-textbox\" />' +\n            \"</div>\" +\n            '<div class=\"ui-gs-token-field\">' +\n            '<span class=ui-gs-label\"><div class=\"ui-gs-token-label\">Token</div></span>' +\n            '<span class=\"ui-gs-token-textbox\" />' +\n            \"</div>\" +\n            \"</div>\"\n        );\n    },\n\n    /** Return/Set currently selected genomespace filename/token */\n    value: function(new_value) {\n        // check if new_value is defined\n        if (new_value !== undefined) {\n            this._setValue(new_value);\n        } else {\n            return this._getValue();\n        }\n    },\n\n    // get value\n    _getValue: function() {\n        return `${this.filename_textbox.value()}^${this.token_textbox.value()}`;\n    },\n\n    // set value\n    _setValue: function(new_value) {\n        if (new_value) {\n            values = new_value.split(\"^\");\n            this.filename_textbox.value(values[0]);\n            this.token_textbox.value(values[1]);\n        }\n    }\n});\n\nexport default {\n    View: View\n};\n"]}