{"version":3,"sources":["mvc/history/hdca-li-edit.js"],"names":["_super","_hdcaLi2","default","HDCAListItemView","HDCAListItemEdit","extend","_getFoldoutPanelClass","this","model","get","_collectionViewEdit2","ListCollectionViewEdit","PairCollectionViewEdit","ListOfListsCollectionViewEdit","TypeError","log","prototype","_renderPrimaryActions","_renderDeleteButton","self","deleted","_faIconButton2","title","_localization2","classes","faIcon","disabled","onclick","$el","find","trigger","toString"],"mappings":"wTAMIA,EAASC,EAAAC,QAAQC,iBAGjBC,EAAmBJ,EAAOK,QAMtBC,sBAAuB,WACnB,OAAQC,KAAKC,MAAMC,IAAI,oBACnB,IAAK,OACD,OAAOC,EAAAR,QAAaS,uBACxB,IAAK,SACD,OAAOD,EAAAR,QAAaU,uBAfxC,IAAA,cACa,OAAAF,EAAAR,QAAQC,8BACrB,IAAA,YAiBoB,OAAOO,EAAAR,QAAaW,8BAdpC,MAAA,IAAAC,UAAA,2BAAyCP,KAAAC,MAAAC,IAAA,qBAKrCH,sBAAuB,WAGX,OAFRC,KAAAQ,IAAQR,KAAR,0BAEQP,EAAAgB,UAAOC,sBAAaN,KAAAA,MAAAA,QAAAA,KAApBO,yBAIAA,oBAAO,WACX,IAAAC,EAAKZ,KACDa,EAAAb,KAAOC,MAAAC,IAAA,WARf,OAAA,EAAAY,EAAAnB,UAUAoB,MAAUR,GAAJ,EAAAS,EAAArB,SAAA,0CAAwD,EAAAqB,EAAArB,SAAA,UAhB7BsB,QAAA,aAkC7BC,OAAQ,WAfhBC,SAAAN,EACAO,QAAA,WAEIR,EAAAS,IAAAC,KAAA,wBAAAC,QAAA,YACAX,EAAAX,MAAA,aAOAuB,SAAIX,WAEAE,MAAAA,qBADGf,KAAAC,MAAA,GAAAD,KAAaC,MAAA,cAChBc,kBAOIH,iBAAAA","file":"../../../scripts/mvc/history/hdca-li-edit.js","sourcesContent":["import HDCA_LI from \"mvc/history/hdca-li\";\nimport DC_VIEW_EDIT from \"mvc/collection/collection-view-edit\";\nimport faIconButton from \"ui/fa-icon-button\";\nimport _l from \"utils/localization\";\n\n//==============================================================================\nvar _super = HDCA_LI.HDCAListItemView;\n/** @class Editing view for HistoryDatasetCollectionAssociation.\n */\nvar HDCAListItemEdit = _super.extend(\n    /** @lends HDCAListItemEdit.prototype */ {\n        /** logger used to record this.log messages, commonly set to console */\n        //logger              : console,\n\n        /** Override to return editable versions of the collection panels */\n        _getFoldoutPanelClass: function() {\n            switch (this.model.get(\"collection_type\")) {\n                case \"list\":\n                    return DC_VIEW_EDIT.ListCollectionViewEdit;\n                case \"paired\":\n                    return DC_VIEW_EDIT.PairCollectionViewEdit;\n                case \"list:paired\":\n                    return DC_VIEW_EDIT.ListOfPairsCollectionViewEdit;\n                case \"list:list\":\n                    return DC_VIEW_EDIT.ListOfListsCollectionViewEdit;\n            }\n            throw new TypeError(`Uknown collection_type: ${this.model.get(\"collection_type\")}`);\n        },\n\n        // ......................................................................... delete\n        /** In this override, add the delete button. */\n        _renderPrimaryActions: function() {\n            this.log(`${this}._renderPrimaryActions`);\n            // render the display, edit attr and delete icon-buttons\n            return _super.prototype._renderPrimaryActions.call(this).concat([this._renderDeleteButton()]);\n        },\n\n        /** Render icon-button to delete this collection. */\n        _renderDeleteButton: function() {\n            var self = this;\n            var deleted = this.model.get(\"deleted\");\n            return faIconButton({\n                title: deleted ? _l(\"Dataset collection is already deleted\") : _l(\"Delete\"),\n                classes: \"delete-btn\",\n                faIcon: \"fa-times\",\n                disabled: deleted,\n                onclick: function() {\n                    // ...bler... tooltips being left behind in DOM (hover out never called on deletion)\n                    self.$el.find(\".icon-btn.delete-btn\").trigger(\"mouseout\");\n                    self.model[\"delete\"]();\n                }\n            });\n        },\n\n        // ......................................................................... misc\n        /** string rep */\n        toString: function() {\n            var modelString = this.model ? `${this.model}` : \"(no model)\";\n            return `HDCAListItemEdit(${modelString})`;\n        }\n    }\n);\n\n//==============================================================================\nexport default {\n    HDCAListItemEdit: HDCAListItemEdit\n};\n"]}