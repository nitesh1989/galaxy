{"version":3,"sources":["mvc/library/library-folderrow-view.js"],"names":["FolderRowView","Backbone","View","extend","events","click .undelete_dataset_btn","click .undelete_folder_btn","click .edit_folder_btn","click .cancel_folder_btn","click .save_folder_btn","defaults","type","visibility_config","edit_folder_btn","save_folder_btn","cancel_folder_btn","permission_folder_btn","initialize","options","this","_","render","model","folder_item","get","prepareButtons","template","edit_mode","templateRowDeletedFolder","templateRowFolder","templateRowDeletedFile","Galaxy","emit","error","setElement","content_item","$el","show","button_config","vis_config","folder","showDatasetDetails","_libraryDatasetView2","default","LibraryDatasetView","id","undeleteDataset","event","$","that","dataset_id","target","closest","libraries","datasetView","collection","dataset","url","urlRoot","destroy","success","response","folderListView","remove","updated_dataset","_libraryModel2","Item","add","data","folder_id","location","responseJSON","onclick","err_msg","window","undeleteFolder","hide","sortFolder","updated_folder","_toastr2","startModifications","repaint","saveModifications","cancelModifications","is_changed","new_name","find","val","length","warning","new_description","set","save","row_view","patch","info","old_element","replaceWith","tooltip","templateRowFile","join"],"mappings":"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GArE,kBAAA,WACAmE,OAAAA,EAAAA,UAEA,6EAjOiC,OAyOzB,gDALZnE,QACI,mFA0BQ,yBAOA,OASA,gFA/QyB,QAgPzB,OAqCZsE,yCACI,QAtRiC,8BAoPzB,oIAgFZrE,yJACI,UArUiC,kBAwPzB,YAmHZF,OACI,mDA8BH,QA1YL,YA6PgB,OACA,wBAgJZ5B,4NA9IY,sCACA,YACA,mOACA,qCACA,YACA,+BACA,0PACA,oCACA,YACA,0DACA,gQACA,qCACA,YACA,OACA,UACA,QACA,SACFoG,KAAK,MAIfD,gBAAiB,WACb,OAAO/E,EAAEM,UAED,8EACA,OACA,+CACA,QACA,oCACA,6CACA,QACA,OACA,mHACA,kCACA,MACA,QACA,8CACA,yDACA,0DACA,4DACA,OACA,oDACA,6CACA,UACA,QACA,OACA,mDACA,gIACA,UACA,8CACA,yHACA,UACA,6GACA,+HACA,UACA,8CACA,uGACA,uKACA,qCACA,YACA,OACA,UACA,QACA,SACF0E,KAAK,MAIftE,uBAAwB,WACpB,OAAOV,EAAEM,UAED,mFACA,OACA,+CACA,QACA,YACA,2BACA,kCACA,QACA,OACA,qCACA,QACA,OACA,gDACA,QACA,OACA,iDACA,QACA,OACA,mDACA,QACA,OACA,oDACA,6CACA,UACA,QACA,OACA,wHACA,qMACA,wCACA,YACA,QACA,SACF0E,KAAK,MAIfxE,yBAA0B,WACtB,OAAOR,EAAEM,UAED,wFACA,OACA,gDACA,QACA,YACA,2BACA,kCACA,QACA,OACA,yCACA,QACA,OACA,SACA,QACA,YACA,OACA,mDACA,QACA,YACA,OACA,wHACA,oMACA,wCACA,YACA,QACA,SACF0E,KAAK,mBAMfpG,cAAeA","file":"../../../scripts/mvc/library/library-folderrow-view.js","sourcesContent":["import mod_toastr from \"libs/toastr\";\nimport mod_library_model from \"mvc/library/library-model\";\nimport mod_library_dataset_view from \"mvc/library/library-dataset-view\";\nvar FolderRowView = Backbone.View.extend({\n    events: {\n        \"click .undelete_dataset_btn\": \"undeleteDataset\",\n        \"click .undelete_folder_btn\": \"undeleteFolder\",\n        \"click .edit_folder_btn\": \"startModifications\",\n        \"click .cancel_folder_btn\": \"cancelModifications\",\n        \"click .save_folder_btn\": \"saveModifications\"\n    },\n\n    defaults: {\n        type: null,\n        visibility_config: {\n            edit_folder_btn: false,\n            save_folder_btn: false,\n            cancel_folder_btn: false,\n            permission_folder_btn: false\n        },\n        edit_mode: false\n    },\n\n    initialize: function(options) {\n        this.options = _.defaults(options || {}, this.defaults);\n        this.render(this.options);\n    },\n\n    render: function(options) {\n        this.options = _.extend(this.options, options);\n        var folder_item = this.options.model;\n        var template = null;\n\n        if (folder_item.get(\"type\") === \"folder\" || folder_item.get(\"model_class\") === \"LibraryFolder\") {\n            this.options.type = \"folder\";\n            this.prepareButtons(folder_item);\n            if (folder_item.get(\"deleted\")) {\n                template = this.templateRowDeletedFolder();\n            } else {\n                template = this.templateRowFolder();\n            }\n        } else if (\n            folder_item.get(\"type\") === \"file\" ||\n            folder_item.get(\"model_class\") === \"LibraryDatasetDatasetAssociation\" ||\n            folder_item.get(\"model_class\") === \"LibraryDataset\"\n        ) {\n            this.options.type = \"file\";\n            if (folder_item.get(\"deleted\")) {\n                template = this.templateRowDeletedFile();\n            } else {\n                template = this.templateRowFile();\n            }\n        } else {\n            Galaxy.emit.error(\"Unknown library item type found.\");\n            Galaxy.emit.error(folder_item.get(\"type\") || folder_item.get(\"model_class\"));\n        }\n        this.setElement(\n            template({\n                content_item: folder_item,\n                edit_mode: this.options.edit_mode,\n                button_config: this.options.visibility_config\n            })\n        );\n        this.$el.show();\n        return this;\n    },\n\n    /**\n   * Modify the visibility of buttons for\n   * the filling of the row template of a given folder.\n   */\n    prepareButtons: function(folder) {\n        var vis_config = this.options.visibility_config;\n        if (this.options.edit_mode === false) {\n            vis_config.save_folder_btn = false;\n            vis_config.cancel_folder_btn = false;\n            if (folder.get(\"deleted\") === true) {\n                vis_config.edit_folder_btn = false;\n                vis_config.permission_folder_btn = false;\n            } else if (folder.get(\"deleted\") === false) {\n                vis_config.save_folder_btn = false;\n                vis_config.cancel_folder_btn = false;\n                if (folder.get(\"can_modify\") === true) {\n                    vis_config.edit_folder_btn = true;\n                }\n                if (folder.get(\"can_manage\") === true) {\n                    vis_config.permission_folder_btn = true;\n                }\n            }\n        } else if (this.options.edit_mode === true) {\n            vis_config.edit_folder_btn = false;\n            vis_config.permission_folder_btn = false;\n            vis_config.save_folder_btn = true;\n            vis_config.cancel_folder_btn = true;\n        }\n        this.options.visibility_config = vis_config;\n    },\n\n    /* Show the page with dataset details. */\n    showDatasetDetails: function() {\n        Galaxy.libraries.datasetView = new mod_library_dataset_view.LibraryDatasetView({ id: this.id });\n    },\n\n    /* Undelete the dataset on server and render the row again. */\n    undeleteDataset: function(event) {\n        $(\".tooltip\").hide();\n        var that = this;\n        var dataset_id = $(event.target)\n            .closest(\"tr\")\n            .data(\"id\");\n        var dataset = Galaxy.libraries.folderListView.collection.get(dataset_id);\n        dataset.url = `${dataset.urlRoot + dataset.id}?undelete=true`;\n        dataset.destroy({\n            success: function(model, response) {\n                Galaxy.libraries.folderListView.collection.remove(dataset_id);\n                var updated_dataset = new mod_library_model.Item(response);\n                Galaxy.libraries.folderListView.collection.add(updated_dataset);\n                Galaxy.libraries.folderListView.collection.sortFolder(\"name\", \"asc\");\n                mod_toastr.success(\"Dataset undeleted. Click this to see it.\", \"\", {\n                    onclick: function() {\n                        var folder_id = that.model.get(\"folder_id\");\n                        window.location = `${Galaxy.root}library/list#folders/${folder_id}/datasets/${that.id}`;\n                    }\n                });\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(`Dataset was not undeleted. ${response.responseJSON.err_msg}`);\n                } else {\n                    mod_toastr.error(\"An error occured! Dataset was not undeleted. Please try again.\");\n                }\n            }\n        });\n    },\n\n    /* Undelete the folder on server and render the row again. */\n    undeleteFolder: function(event) {\n        $(\".tooltip\").hide();\n        var that = this;\n        var folder_id = $(event.target)\n            .closest(\"tr\")\n            .data(\"id\");\n        var folder = Galaxy.libraries.folderListView.collection.get(folder_id);\n        folder.url = `${folder.urlRoot + folder.id}?undelete=true`;\n        folder.destroy({\n            success: function(model, response) {\n                Galaxy.libraries.folderListView.collection.remove(folder_id);\n                var updated_folder = new mod_library_model.FolderAsModel(response);\n                Galaxy.libraries.folderListView.collection.add(updated_folder);\n                Galaxy.libraries.folderListView.collection.sortFolder(\"name\", \"asc\");\n                mod_toastr.success(\"Folder undeleted.\");\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(`Folder was not undeleted. ${response.responseJSON.err_msg}`);\n                } else {\n                    mod_toastr.error(\"An error occured! Folder was not undeleted. Please try again.\");\n                }\n            }\n        });\n    },\n\n    /* User clicked the 'edit' button on row so render the row as editable. */\n    startModifications: function() {\n        this.options.edit_mode = true;\n        this.repaint();\n    },\n\n    /* User clicked the 'cancel' button so render normal row */\n    cancelModifications: function() {\n        this.options.edit_mode = false;\n        this.repaint();\n    },\n\n    saveModifications: function() {\n        var folder = Galaxy.libraries.folderListView.collection.get(this.$el.data(\"id\"));\n        var is_changed = false;\n        var new_name = this.$el.find(\".input_folder_name\").val();\n        if (typeof new_name !== \"undefined\" && new_name !== folder.get(\"name\")) {\n            if (new_name.length > 2) {\n                folder.set(\"name\", new_name);\n                is_changed = true;\n            } else {\n                mod_toastr.warning(\"Folder name has to be at least 3 characters long.\");\n                return;\n            }\n        }\n        var new_description = this.$el.find(\".input_folder_description\").val();\n        if (typeof new_description !== \"undefined\" && new_description !== folder.get(\"description\")) {\n            folder.set(\"description\", new_description);\n            is_changed = true;\n        }\n        if (is_changed) {\n            var row_view = this;\n            folder.save(null, {\n                patch: true,\n                success: function(folder) {\n                    row_view.options.edit_mode = false;\n                    row_view.repaint(folder);\n                    mod_toastr.success(\"Changes to folder saved.\");\n                },\n                error: function(model, response) {\n                    if (typeof response.responseJSON !== \"undefined\") {\n                        mod_toastr.error(response.responseJSON.err_msg);\n                    } else {\n                        mod_toastr.error(\"An error occured while attempting to update the folder.\");\n                    }\n                }\n            });\n        } else {\n            this.options.edit_mode = false;\n            this.repaint(folder);\n            mod_toastr.info(\"Nothing has changed.\");\n        }\n    },\n\n    repaint: function() {\n        /* need to hide manually because of the element removal in setElement\n    invoked in render() */\n        $(\".tooltip\").hide();\n        /* we need to store the old element to be able to replace it with\n    new one */\n        var old_element = this.$el;\n        /* if user canceled the folder param is undefined,\n      if user saved and succeeded the updated folder is rendered */\n        this.render();\n        old_element.replaceWith(this.$el);\n        /* now we attach new tooltips to the newly created row element */\n        this.$el.find(\"[data-toggle]\").tooltip();\n    },\n\n    templateRowFolder: function() {\n        return _.template(\n            [\n                '<tr class=\"folder_row light library-row\" data-id=\"<%- content_item.id %>\">',\n                \"<td>\",\n                '<span title=\"Folder\" class=\"fa fa-folder-o\"/>',\n                \"</td>\",\n                '<td style=\"text-align: center; \"><input style=\"margin: 0;\" type=\"checkbox\"></td>',\n                \"<% if(!edit_mode) { %>\",\n                \"<td>\",\n                '<a href=\"#folders/<%- content_item.id %>\"><%- content_item.get(\"name\") %></a>',\n                \"</td>\",\n                \"<td>\",\n                '<%- content_item.get(\"description\") %>',\n                \"</td>\",\n                \"<% } else if(edit_mode){ %>\",\n                '<td><textarea rows=\"4\" class=\"form-control input_folder_name\" placeholder=\"name\" ><%- content_item.get(\"name\") %></textarea></td>',\n                '<td><textarea rows=\"4\" class=\"form-control input_folder_description\" placeholder=\"description\" ><%- content_item.get(\"description\") %></textarea></td>',\n                \"<% } %>\",\n                \"<td>folder</td>\",\n                \"<td></td>\",\n                \"<td>\",\n                '<%= _.escape(content_item.get(\"update_time\")) %>',\n                \"</td>\",\n                \"<td></td>\",\n                \"<td>\",\n                \"<% if(edit_mode) { %>\", // start edit mode\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Save changes\" class=\"primary-button btn-xs save_folder_btn\" type=\"button\" style=\"<% if(button_config.save_folder_btn === false) { print(\"display:none;\") } %>\">',\n                '<span class=\"fa fa-floppy-o\"/> Save',\n                \"</button>\",\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Discard changes\" class=\"primary-button btn-xs cancel_folder_btn\" type=\"button\" style=\"<% if(button_config.cancel_folder_btn === false) { print(\"display:none;\") } %>\">',\n                '<span class=\"fa fa-times\"/> Cancel',\n                \"</button>\",\n                \"<% } else if (!edit_mode){%>\", // start no edit mode\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Modify \\'<%- content_item.get(\"name\") %>\\'\" class=\"primary-button btn-xs edit_folder_btn\" type=\"button\" style=\"<% if(button_config.edit_folder_btn === false) { print(\"display:none;\") } %>\">',\n                '<span class=\"fa fa-pencil\"/> Edit',\n                \"</button>\",\n                '<a href=\"#/folders/<%- content_item.id %>/permissions\">',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" class=\"primary-button btn-xs permission_folder_btn\" title=\"Permissions of \\'<%- content_item.get(\"name\") %>\\'\" style=\"<% if(button_config.permission_folder_btn === false) { print(\"display:none;\") } %>\">',\n                '<span class=\"fa fa-group\"/> Manage',\n                \"</button>\",\n                \"</a>\",\n                \"<% } %>\", //end no edit mode\n                \"</td>\",\n                \"</tr>\"\n            ].join(\"\")\n        );\n    },\n\n    templateRowFile: function() {\n        return _.template(\n            [\n                '<tr class=\"dataset_row light library-row\" data-id=\"<%- content_item.id %>\">',\n                \"<td>\",\n                '<span title=\"Dataset\" class=\"fa fa-file-o\"/>',\n                \"</td>\",\n                '<td style=\"text-align: center; \">',\n                '<input style=\"margin: 0;\" type=\"checkbox\">',\n                \"</td>\",\n                \"<td>\",\n                '<a href=\"#folders/<%- content_item.get(\"folder_id\") %>/datasets/<%- content_item.id %>\" class=\"library-dataset\">',\n                '<%- content_item.get(\"name\") %>',\n                \"<a>\",\n                \"</td>\",\n                '<td><%- content_item.get(\"message\") %></td>',\n                '<td><%= _.escape(content_item.get(\"file_ext\")) %></td>',\n                '<td><%= _.escape(content_item.get(\"file_size\")) %></td>',\n                '<td><%= _.escape(content_item.get(\"update_time\")) %></td>',\n                \"<td>\",\n                '<% if ( content_item.get(\"state\") !== \"ok\" ) { %>',\n                '<%= _.escape(content_item.get(\"state\")) %>',\n                \"<% } %>\",\n                \"</td>\",\n                \"<td>\",\n                '<% if (content_item.get(\"is_unrestricted\")) { %>',\n                '<span data-toggle=\"tooltip\" data-placement=\"top\" title=\"Unrestricted dataset\" style=\"color:grey;\" class=\"fa fa-globe fa-lg\"/>',\n                \"<% } %>\",\n                '<% if (content_item.get(\"is_private\")) { %>',\n                '<span data-toggle=\"tooltip\" data-placement=\"top\" title=\"Private dataset\" style=\"color:grey;\" class=\"fa fa-key fa-lg\"/>',\n                \"<% } %>\",\n                '<% if ((content_item.get(\"is_unrestricted\") === false) && (content_item.get(\"is_private\") === false)) { %>',\n                '<span data-toggle=\"tooltip\" data-placement=\"top\" title=\"Restricted dataset\" style=\"color:grey;\" class=\"fa fa-shield fa-lg\"/>',\n                \"<% } %>\",\n                '<% if (content_item.get(\"can_manage\")) { %>',\n                '<a href=\"#folders/<%- content_item.get(\"folder_id\") %>/datasets/<%- content_item.id %>/permissions\">',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" class=\"primary-button btn-xs permissions-dataset-btn\" title=\"Permissions of \\'<%- content_item.get(\"name\") %>\\'\">',\n                '<span class=\"fa fa-group\"/> Manage',\n                \"</button>\",\n                \"</a>\",\n                \"<% } %>\",\n                \"</td>\",\n                \"</tr>\"\n            ].join(\"\")\n        );\n    },\n\n    templateRowDeletedFile: function() {\n        return _.template(\n            [\n                '<tr class=\"active deleted_dataset library-row\" data-id=\"<%- content_item.id %>\">',\n                \"<td>\",\n                '<span title=\"Dataset\" class=\"fa fa-file-o\"/>',\n                \"</td>\",\n                \"<td></td>\",\n                '<td style=\"color:grey;\">',\n                '<%- content_item.get(\"name\") %>',\n                \"</td>\",\n                \"<td>\",\n                '<%- content_item.get(\"message\") %>',\n                \"</td>\",\n                \"<td>\",\n                '<%= _.escape(content_item.get(\"file_ext\")) %>',\n                \"</td>\",\n                \"<td>\",\n                '<%= _.escape(content_item.get(\"file_size\")) %>',\n                \"</td>\",\n                \"<td>\",\n                '<%= _.escape(content_item.get(\"update_time\")) %>',\n                \"</td>\",\n                \"<td>\",\n                '<% if ( content_item.get(\"state\") !== \"ok\" ) { %>',\n                '<%= _.escape(content_item.get(\"state\")) %>',\n                \"<% } %>\",\n                \"</td>\",\n                \"<td>\",\n                '<span data-toggle=\"tooltip\" data-placement=\"top\" title=\"Marked deleted\" style=\"color:grey;\" class=\"fa fa-ban fa-lg\"/>',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Undelete \\'<%- content_item.get(\"name\") %>\\'\" class=\"primary-button btn-xs undelete_dataset_btn\" type=\"button\" style=\"margin-left:1em;\">',\n                '<span class=\"fa fa-unlock\"/> Undelete',\n                \"</button>\",\n                \"</td>\",\n                \"</tr>\"\n            ].join(\"\")\n        );\n    },\n\n    templateRowDeletedFolder: function() {\n        return _.template(\n            [\n                '<tr class=\"active deleted_folder light library-row\" data-id=\"<%- content_item.id %>\">',\n                \"<td>\",\n                '<span title=\"Folder\" class=\"fa fa-folder-o\"/>',\n                \"</td>\",\n                \"<td></td>\",\n                '<td style=\"color:grey;\">',\n                '<%- content_item.get(\"name\") %>',\n                \"</td>\",\n                \"<td>\",\n                '<%- content_item.get(\"description\") %>',\n                \"</td>\",\n                \"<td>\",\n                \"folder\",\n                \"</td>\",\n                \"<td></td>\",\n                \"<td>\",\n                '<%= _.escape(content_item.get(\"update_time\")) %>',\n                \"</td>\",\n                \"<td></td>\",\n                \"<td>\",\n                '<span data-toggle=\"tooltip\" data-placement=\"top\" title=\"Marked deleted\" style=\"color:grey;\" class=\"fa fa-ban fa-lg\"/>',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Undelete \\'<%- content_item.get(\"name\") %>\\'\" class=\"primary-button btn-xs undelete_folder_btn\" type=\"button\" style=\"margin-left:1em;\">',\n                '<span class=\"fa fa-unlock\"/> Undelete',\n                \"</button>\",\n                \"</td>\",\n                \"</tr>\"\n            ].join(\"\")\n        );\n    }\n});\n\nexport default {\n    FolderRowView: FolderRowView\n};\n"]}