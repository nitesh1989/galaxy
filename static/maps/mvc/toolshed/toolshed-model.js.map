{"version":3,"sources":["mvc/toolshed/toolshed-model.js"],"names":["ToolShedModel","Backbone","Model","extend","defaults","url","name","urlRoot","Galaxy","root","Collection","model","ToolShedCategoriesModel","ToolShedCategoriesCollection","ToolShedCategoryModel","ToolShedCategoryCollection","ToolShedRepositoryModel","ToolShedRepositoryCollection","RepoQueueModel","RepoQueueCollection","collection","this","repositories","Array","Object","keys","repositories_enc","_","fetch","repo","key","queue_keys","each","prototype","call","RepoStatusModel","RepoStatusCollection","WorkflowToolsModel","WorkflowToolsCollection","ShedModel","Categories","CategoryModel","CategoryCollection","ShedsCollection","ToolShedsCollection","Category"],"mappings":"2HAAA,IAAIA,EAAgBC,SAASC,MAAMC,QAC/BC,UACIC,IAAK,kCACLC,KAAM,yBAEVC,QAAYC,OAAOC,KAAnB,kBAHIJ,EAAKJ,SAAAS,WAAAP,QACLG,IAAAA,OAAMG,KAANH,gBAFMK,MAD4BX,IAatCY,EAA0BX,SAASC,MAAMC,QAL7CC,cACIC,QAAQG,OAAOC,KAAfJ,2BASAQ,EAA+BZ,SAASS,WAAWP,QALvDE,IAAIO,OAAAA,KAAJ,yBACIR,MAAAA,IASAU,EAAwBb,SAASC,MAAMC,QAL3CC,cACIC,QAAQG,OAAOC,KAAfJ,2BASAU,EAA6Bd,SAASS,WAAWP,QALrDE,IAAIS,OAAAA,KAAJ,yBACIV,MAAAA,IASAY,EAA0Bf,SAASC,MAAMC,QAL7CC,cACIC,QAAQG,OAAOC,KAAfJ,6BASAY,EAA+BhB,SAASS,WAAWP,QALvDE,IAAIW,OAAAA,KAAJ,2BACIZ,MAAAA,IASAc,EAAiBjB,SAASC,MAAMC,QALpCE,IAAIY,MAA0DE,EAA9DlB,SAAAS,WAAAP,QAUIE,IAAK,IALTM,MAAIO,EACAb,MAAAA,WADJ,IAAAe,EAAAC,KASYC,EAAeC,QALvBJ,EAAsBlB,KAAAA,MAASS,aAAWP,cAC1CE,EADiDmB,OAAAC,KAAAC,GAQ7CC,OANJhB,EAAAA,KAAOO,EAAAA,SAAAA,GACPU,IAAOC,EAAAH,EAAWI,GACdD,EAAIT,UAAaU,EACjBR,EAAIA,KAAAA,KAEJF,EAAIW,MAAAA,GACFC,SAAKD,WAAYE,UAAAL,MAAOM,KAAAb,SAIzBc,EAJDlC,SAAAC,MAAAC,QAKAiB,cACAb,QAAAC,OAAOP,KAAP,yBASJmC,EAAuBnC,SAASS,WAAWP,QAL/CE,IAAI8B,OAAAA,KAAJ,uBACI/B,MAAAA,IASAiC,EAAqBpC,SAASC,MAAMC,QALxCC,cACIC,QAAQG,OAAOC,KAAfJ,qCASAiC,EAA0BrC,SAASS,WAAWP,QALlDE,IAAIgC,OAAAA,KAAJ,mCACIjC,MAAAA,eAIJmC,UAAID,EACAjC,gBAAeI,EACfE,SAAAA,EAFqD6B,WAAzD3B,EAUI4B,cAAe3B,EACf4B,mBANW3B,EACXwB,gBAAWvC,EACX2C,qBAAiBC,EACjBC,UAAAA,EACAL,WAAAA,EACAC,cAAAA","file":"../../../scripts/mvc/toolshed/toolshed-model.js","sourcesContent":["var ToolShedModel = Backbone.Model.extend({\n    defaults: {\n        url: \"https://toolshed.g2.bx.psu.edu/\",\n        name: \"Galaxy Main Tool Shed\"\n    },\n    urlRoot: `${Galaxy.root}api/tool_shed`\n});\n\nvar ToolShedsCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed`,\n    model: ToolShedModel\n});\n\nvar ToolShedCategoriesModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/contents`\n});\n\nvar ToolShedCategoriesCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/contents`,\n    model: ToolShedCategoriesModel\n});\n\nvar ToolShedCategoryModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/category`\n});\n\nvar ToolShedCategoryCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/category`,\n    model: ToolShedCategoryModel\n});\n\nvar ToolShedRepositoryModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/repository`\n});\n\nvar ToolShedRepositoryCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/repository`,\n    model: ToolShedRepositoryModel\n});\n\nvar RepoQueueModel = Backbone.Model.extend({\n    url: \"#\"\n});\n\nvar RepoQueueCollection = Backbone.Collection.extend({\n    url: \"#\",\n    model: RepoQueueModel,\n    fetch: function() {\n        var collection = this;\n        var repositories = Array();\n        var repositories_enc = JSON.parse(localStorage.repositories);\n        var queue_keys = Object.keys(repositories_enc);\n        _.each(queue_keys, key => {\n            var repo = repositories_enc[key];\n            repo.queue_key = key;\n            repositories.push(repo);\n        });\n        collection.reset(repositories);\n        return Backbone.Collection.prototype.fetch.call(this);\n    }\n});\n\nvar RepoStatusModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/status`\n});\n\nvar RepoStatusCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/status`,\n    model: RepoStatusModel\n});\n\nvar WorkflowToolsModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/workflows?missing_tools=True`\n});\n\nvar WorkflowToolsCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/workflows?missing_tools=True`,\n    model: WorkflowToolsModel\n});\n\nexport default {\n    ShedModel: ToolShedModel,\n    ShedsCollection: ToolShedsCollection,\n    Category: ToolShedCategoriesModel,\n    Categories: ToolShedCategoriesCollection,\n    CategoryModel: ToolShedCategoryModel,\n    CategoryCollection: ToolShedCategoryCollection,\n    RepositoryModel: ToolShedRepositoryModel,\n    RepositoryCollection: ToolShedRepositoryCollection,\n    RepoQueue: RepoQueueCollection,\n    RepoStatus: RepoStatusCollection,\n    WorkflowTools: WorkflowToolsCollection\n};\n"]}